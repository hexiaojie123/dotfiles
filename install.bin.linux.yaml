- defaults:
    link:
      create: true
      relink: true
      force: true

- clean:
    "$XDG_CONFIG_HOME":
      recursive: true
    "$XDG_CACHE_HOME":
      recursive: true
    "$XDG_DATA_HOME":
      recursive: true
    "$XDG_STATE_HOME":
      recursive: true

- shell:
  - echo "Platform is ${PLATFORM}"

- shell:
  - #zsh
    command: >
      binaries/${PLATFORM}/zsh/install
      -f binaries/${PLATFORM}/zsh/zsh-5.8-linux-${PLATFORM}.tar.gz
      -d $HOME/.local
      -e no &&
      ALT_ZSH="$HOME/.local/bin/zsh" &&
      echo "If your default is bash, please add the below at the end of your .bashrc:

      cat << 'EOF' >> \$HOME/.bashrc

      ALT_ZSH="\$HOME/.local/bin/zsh"

      if [[ -x "\$ALT_ZSH" && \$- == *i* && -z "\$NO_ZSH" ]]; then
          export SHELL="\$ALT_ZSH"
          exec "\$ALT_ZSH" -l
      fi

      EOF
      "
    quiet: true
    stdout: true

- link:
    ~/.local/bin/bat: binaries/${PLATFORM}/bat/bin/bat # bat
    ~/.local/bin/btop: binaries/${PLATFORM}/btop/bin/btop # btop
    ~/.local/bin/delta: binaries/${PLATFORM}/delta/bin/delta # delta
    ~/.local/bin/dust: binaries/${PLATFORM}/dust/bin/dust # dust
    ~/.local/bin/eza: binaries/${PLATFORM}/eza/bin/eza # eza
    ~/.local/bin/fastfetch: binaries/${PLATFORM}/fastfetch/bin/fastfetch # fastfetch
    ~/.local/bin/fd: binaries/${PLATFORM}/fd/bin/fd # fd
    ~/.local/bin/fzf: binaries/${PLATFORM}/fzf/bin/fzf # fzf
    ~/.local/bin/fzf-preview.sh: binaries/${PLATFORM}/fzf/bin/fzf-preview.sh # fzf
    "$XDG_STATE_HOME/bin/gitstatusd-linux-${PLATFORM}": binaries/${PLATFORM}/gitstatus/bin/gitstatusd-linux-${PLATFORM} # gitstatus
    ~/.local/bin/pueue: binaries/${PLATFORM}/pueue/bin/pueue # pueue
    ~/.local/bin/pueued: binaries/${PLATFORM}/pueue/bin/pueued # pueue
    ~/.local/bin/rg: binaries/${PLATFORM}/ripgrep/bin/rg # ripgrep
    ~/.local/bin/tldr: binaries/${PLATFORM}/tldr/bin/tldr # tldr
    ~/.local/bin/zellij: binaries/${PLATFORM}/zellij/bin/zellij # zellij
    ~/.local/bin/zoxide: binaries/${PLATFORM}/zoxide/bin/zoxide # zoxide
    "$XDG_CACHE_HOME/tlrc": binaries/common/tldr # tldr
    "$XDG_DATA_HOME/zsh/site-functions/_bat": binaries/${PLATFORM}/bat/share/autocomplete/bat.zsh # bat
    "$XDG_DATA_HOME/zsh/site-functions/_eza": binaries/${PLATFORM}/eza/share/_eza # eza
    "$XDG_DATA_HOME/zsh/site-functions/_delta": binaries/${PLATFORM}/delta/share/completion.zsh # delta
    "$XDG_DATA_HOME/zsh/site-functions/_dust": binaries/${PLATFORM}/dust/share/_dust # dust
    "$XDG_DATA_HOME/zsh/site-functions/_fastfetch": binaries/${PLATFORM}/fastfetch/share/zsh/site-functions/_fastfetch # fastfetch
    "$XDG_DATA_HOME/zsh/site-functions/_fd": binaries/${PLATFORM}/fd/share/autocomplete/_fd # fd
    "$XDG_DATA_HOME/zsh/site-functions/_pueue": binaries/${PLATFORM}/pueue/share/_pueue # pueue
    "$XDG_DATA_HOME/zsh/site-functions/_rg": binaries/${PLATFORM}/ripgrep/share/complete/_rg # ripgrep
    "$XDG_DATA_HOME/zsh/site-functions/_tldr": binaries/${PLATFORM}/tldr/share/completions/_tldr # ripgrep
    "$XDG_DATA_HOME/zsh/site-functions/_zellij": binaries/${PLATFORM}/zellij/share/_zellij # zellij
    "$XDG_DATA_HOME/zsh/site-functions/_zoxide": binaries/${PLATFORM}/zoxide/share/completions/_zoxide # zoxide
