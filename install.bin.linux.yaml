- defaults:
    link:
      create: true
      relink: true
      force: true

- clean:
    "$XDG_CONFIG_HOME":
      recursive: true
    "$XDG_CACHE_HOME":
      recursive: true
    "$XDG_DATA_HOME":
      recursive: true
    "$XDG_STATE_HOME":
      recursive: true

- shell:
  - echo "Platform is ${PLATFORM}"
  - #zsh (must be after than linking bin)
    command: >
      toolbox/share/zsh/zsh-bin/install
      -f toolbox/share/zsh/zsh-bin/zsh-5.8-linux-${PLATFORM}.tar.gz
      -d $HOME/.local/zsh-install
      -e no &&
      ALT_ZSH="$HOME/.local/zsh-install/bin/zsh" &&
      echo "If your default is bash, please add the below at the end of your .bashrc:

      cat << 'EOF' >> \$HOME/.bashrc

      ALT_ZSH="\$HOME/.local/zsh-install/bin/zsh"

      if [[ -x "\$ALT_ZSH" && \$- == *i* && -z "\$NO_ZSH" ]]; then
          export SHELL="\$ALT_ZSH"
          exec "\$ALT_ZSH" -l
      fi

      EOF
      "
    quiet: true
    stdout: true

- link:
    ~/.local/bin: toolbox/bin/${PLATFORM} # bin (dir)
    "$XDG_STATE_HOME/bin/gitstatusd-linux-${PLATFORM}": toolbox/bin/${PLATFORM}/gitstatusd-linux-${PLATFORM} # gitstatus
